<div class="flex h-full bg-slate-100 flex-col justify-start">
  <div class="text-center flex justify-center text-5xl font-bold my-5">Register New Artist</div>
  <form [formGroup]="registerForm"
        class="flex flex-col justify-center p-10"
        (ngSubmit)="onSubmit()">
    <mat-form-field>
      <mat-label>First Name</mat-label>
      <input matInput
             formControlName="firstName"
             placeholder="First Name">
      <mat-error
                 *ngIf="registerForm.get('firstName')!.invalid && (registerForm.get('firstName')!.dirty || registerForm.get('firstName')!.touched)">
        <div *ngIf="registerForm.get('firstName')!.errors!['required']">First Name is required.</div>
        <div *ngIf="registerForm.get('firstName')!.errors!['minlength']">First Name must be at least 3 characters.</div>
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Last Name</mat-label>
      <input matInput
             formControlName="lastName"
             placeholder="Last Name">
      <mat-error
                 *ngIf="registerForm.get('lastName')!.invalid && (registerForm.get('lastName')!.dirty || registerForm.get('lastName')!.touched)">
        <div *ngIf="registerForm.get('lastName')!.errors!['required']">Last Name is required.</div>
        <div *ngIf="registerForm.get('lastName')!.errors!['minlength']">Last Name must be at least 3 characters.</div>
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Date of Birth</mat-label>
      <input matInput
             [matDatepicker]="dobPicker"
             formControlName="dob"
             placeholder="Date of Birth">
      <mat-datepicker-toggle matSuffix
                             [for]="dobPicker"></mat-datepicker-toggle>
      <mat-datepicker #dobPicker></mat-datepicker>
      <mat-error
                 *ngIf="registerForm.get('dob')!.invalid && (registerForm.get('dob')!.dirty || registerForm.get('dob')!.touched)">
        <div *ngIf="registerForm.get('dob')!.errors!['required']">Date of Birth is required.</div>
        <div *ngIf="registerForm.get('dob')!.errors!['ageError']">You must be at least {{
          registerForm.get('dob')!.errors!['ageError']!['required'] }} years old.</div>
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Email</mat-label>
      <input matInput
             formControlName="email"
             placeholder="Email">
      <mat-error
                 *ngIf="registerForm.get('email')!.invalid && (registerForm.get('email')!.dirty || registerForm.get('email')!.touched)">
        <div *ngIf="registerForm.get('email')!.errors!['email']">Invalid email format.</div>
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Phone Number *</mat-label>
      <input matInput
             formControlName="phoneNumber"
             placeholder="Phone Number">
      <mat-error
                 *ngIf="registerForm.get('phoneNumber')!.invalid && (registerForm.get('phoneNumber')!.dirty || registerForm.get('phoneNumber')!.touched)">
        <div *ngIf="registerForm.get('phoneNumber')!.errors!['pattern']">Invalid phone number format.</div>
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Profile Picture</mat-label>
      <input matInput
             formControlName="profilePicture"
             placeholder="Profile Picture">
    </mat-form-field>

    <mat-form-field>
      <mat-label>Stage Name</mat-label>
      <input matInput
             formControlName="stageName"
             placeholder="Stage Name">
    </mat-form-field>

    <mat-form-field>
      <mat-label>Artist Backstory</mat-label>
      <textarea matInput
                formControlName="artistBackstory"
                placeholder="Artist Backstory"></textarea>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Starting Date</mat-label>
      <input matInput
             [matDatepicker]="startingDatePicker"
             formControlName="startingDate"
             placeholder="Starting Date">
      <mat-datepicker-toggle matSuffix
                             [for]="startingDatePicker"></mat-datepicker-toggle>
      <mat-datepicker #startingDatePicker></mat-datepicker>
    </mat-form-field>
    <ng-container formArrayName="albums">
      <ng-container *ngFor="let albumForm of albums.controls; let i=index">
        <form [formGroup]="getAsFormGroup(albumForm)"
              class="flex gap-x-5 pl-5">
          <mat-form-field>
            <input matInput
                   formControlName="picture"
                   placeholder="url">
          </mat-form-field>
          <mat-form-field>
            <mat-label>Album Date</mat-label>
            <input matInput
                   [matDatepicker]="albumDatePicker"
                   formControlName="date"
                   placeholder="Date">
            <mat-datepicker-toggle matSuffix
                                   [for]="albumDatePicker"></mat-datepicker-toggle>
            <mat-datepicker #albumDatePicker></mat-datepicker>
          </mat-form-field>
          <!-- songs form -->
          <ng-container formArrayName="songs">
            <ng-container *ngFor="let songForm of getSongs(i).controls">
              <form [formGroup]="getAsFormGroup(songForm)"
                    class="flex flex-col gap-x-5">
                <mat-form-field>
                  <input matInput
                         formControlName="name"
                         placeholder="Song name">
                </mat-form-field>
                <mat-form-field>
                  <input matInput
                         formControlName="duration"
                         placeholder="duration">
                </mat-form-field>
              </form>
            </ng-container>
          </ng-container>
          <button mat-raised-button
                  color="primary"
                  class="w-1/4 flex"
                  (click)="addSong(i)">
            <mat-icon fontIcon="add"></mat-icon>
            Add Song
          </button>
        </form>
      </ng-container>
    </ng-container>

    <button mat-raised-button
            color="primary"
            class="w-1/4 flex"
            (click)="addAlbum()">
      <mat-icon fontIcon="add"></mat-icon>
      Add Album
    </button>
    <div class="flex justify-center mt-10">
      <button mat-raised-button
              type="submit"
              color="primary"
              class="w-1/2 flex">Submit</button>
    </div>

  </form>

</div>